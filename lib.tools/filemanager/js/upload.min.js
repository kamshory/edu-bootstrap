(function(){function e(e,n){let t=document.getElementById("image-list"),a=document.createElement("li"),o=document.createElement("img");o.src=e,a.appendChild(o),t.appendChild(a)}let n=document.getElementById("images"),t=!1;window.FormData?t=new FormData:$(".upload-button").css("display","inline"),n.addEventListener("change",function(n){window.FormData&&$("#response").html("Uploading . . .");let a,o,i=0,l=this.files.length;for(;i<l;i++)o=this.files[i],o.type.match(/image.*/)?(window.FileReader&&(a=new FileReader,a.onloadend=function(n){e(n.target.result,o.fileName)},a.readAsDataURL(o)),t&&t.append("images[]",o)):t.append("images[]",o);if(t){let e=$("#address").val();$.ajax({url:"tool-upload-file.php?targetdir="+encodeURIComponent(e),type:"POST",data:t,processData:!1,contentType:!1,success:function(e){console.log(e),"SUCCESS"==e?($("#response").html("File has been uploaded."),openDir()):"READONLY"==e?(openDir(),$("#response").html("&nbsp;"),jqAlert("This operation is disabled on read only mode.","Readonly"),t=new FormData):"DENIED"!=e&&"FORBIDDEN"!=e||(openDir(),$("#response").html("&nbsp;"),jqAlert("Uploading file is forbidden.","Forbidden"),t=new FormData)}})}},!1)})();