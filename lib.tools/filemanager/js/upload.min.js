!function(){let input=document.getElementById("images"),formdata=!1;function showUploadedItem(source,name){let list=document.getElementById("image-list"),li=document.createElement("li"),img=document.createElement("img");img.src=source,li.appendChild(img),list.appendChild(li)}window.FormData?formdata=new FormData:$(".upload-button").css("display","inline"),input.addEventListener("change",(function(evt){window.FormData&&$("#response").html("Uploading . . .");let i=0,len=this.files.length,reader,file;for(;i<len;i++)file=this.files[i],file.type.match(/image.*/)?(window.FileReader&&(reader=new FileReader,reader.onloadend=function(e){showUploadedItem(e.target.result,file.fileName)},reader.readAsDataURL(file)),formdata&&formdata.append("images[]",file)):formdata.append("images[]",file);if(formdata){let dl=$("#address").val();$.ajax({url:"tool-upload-file.php?targetdir="+encodeURIComponent(dl),type:"POST",data:formdata,processData:!1,contentType:!1,success:function(answer){console.log(answer),"SUCCESS"==answer?($("#response").html("File has been uploaded."),openDir()):"READONLY"==answer?(openDir(),$("#response").html("&nbsp;"),jqAlert("This operation is disabled on read only mode.","Readonly"),formdata=new FormData):"DENIED"!=answer&&"FORBIDDEN"!=answer||(openDir(),$("#response").html("&nbsp;"),jqAlert("Uploading file is forbidden.","Forbidden"),formdata=new FormData)}})}}),!1)}();