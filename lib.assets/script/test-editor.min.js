function basename(e){return e.replace(/\\/g,"/").replace(/.*\//,"")}function dirname(e){return e.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function getfileExtension(e){return/[.]/.exec(e)?/[^.]+$/.exec(e):""}function removefileextension(e){return e.replace(/\.[^/.]+$/,"")}function fileBrowserCallBack(e,t,a,i){-1!=t.indexOf("data:")&&(t=""),t=t.substr(baseTestURLLength);let n="../lib.tools/filemanager/?test_id="+test_id+"&editor=tiny_mce&type="+a+"&field_name="+e+"&dir=base/"+dirname(t);switch(a){case"image":case"media":case"flash":case"file":break;default:return!1}tinyMCE.activeEditor.windowManager.open({url:n,width:780,height:440,resizable:!0,maximizable:!0,inline:"yes",close_previous:"no"},{window:i,input:e})}function pasteHandler(e){function t(e){e&&(reader=new FileReader,reader.onload=function(e){a(e.target.result)},reader.readAsDataURL(e))}function a(e){if(-1==window.navigator.userAgent.toString().indexOf("Firefox")){let t="<img src='"+e+"' data-mce-selected='1'></img>";window.tinyMCE.execCommand("mceInsertContent",!1,t)}}let i;if(e.clipboardData?i=e.clipboardData:window.clipboardData&&(i=window.clipboardData),e.msConvertURL){let e=i.files;if(e.length>0)for(let a=0;a<e.length;a++){let i=e[a];t(i)}}if(i&&i.items){if(text=i.getData("text/plain"))return;for(let e=0;e<i.items.length;e++)if(-1!==i.items[e].type.indexOf("image")){let a=i.items[e].getAsFile();t(a)}}}function simpansoal(e){console.log("aaaaa");let t=0;if($(".htmleditor").each(function(e){let a=$(this).html();""==a&&t++}),t>0)return alert("Soal dan option tidak boleh kosong."+t),!1;let a=0,i=0;if($(".score").each(function(e){let t=parseInt($(this).val());""==$(this).val()&&(t=0),t>maxScore&&i++,a+=t}),i>0)return alert("Nilai maksimum untuk setiap answer adalah "+maxScore),!1;if(0==a)return alert("Minimal ada sebuah pilihan yang mempunyai nilai."),!1;let n=$(e).serialize(),r="save=save&"+n;return $.ajax({url:"ajax-add-question.php",data:{data:r},type:"POST",dataType:"json",success:function(e){0==e.duplicated||"0"==e.duplicated?($(".htmleditor").each(function(e){$(this).tinymce().execCommand("mceSetContent",!1,"")}),$(".score").val(""),$("#total_collection").text(e.collection),$(document).scrollTop(0)):($("#total_collection").text(e.collection),alert("Soal yang sama untuk ujian ini telah dibuat sebelumnya. Silakan ubah soal dan jawaban."),$(document).scrollTop(0))}}),!1}let ascii_svg_server="lib.tools/asciisvg/svgimg.php",equation_preview_url="../../../../../../cgi-bin/equgen.cgi?",equation_generator_url="../../../../../../equgen.php?",equation_renderer_machine=navigator.userAgent.toString().indexOf("Firefox")>-1?"mathml-png":"mathjax-svg",quran_server="../lib.quran";$(document).ready(function(){$("textarea.htmleditor").tinymce({script_url:"../lib.assets/script/tiny_mce/tiny_mce.js",theme:"advanced",ascii_svg_server:ascii_svg_server,equation_preview_url:equation_preview_url,equation_generator_url:equation_generator_url,equation_renderer_machine:equation_renderer_machine,quran_server:quran_server,noneditable_editable_class:"is-editable",noneditable_noneditable_class:"is-locked",plugins:"noneditable,autolink,lists,style,table,advhr,advimage,advlink,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist,quran,latex,equation,chem,asciisvg,chart,draw",theme_advanced_buttons1:"pasteword,pastetext,undo,redo,search,bold,italic,underline,strikethrough,formatselect,fontselect,fontsizeselect,justifyleft,justifycenter,justifyright,justifyfull,ltr,rtl,numlist,bullist,indent,outdent,blockquote",theme_advanced_buttons2:"noneditable,visualaid,forecolor,backcolor,removeformat,anchor,link,unlink,image,media,quran,charmap,sup,sub,latex,equation,chem,asciisvg,chart,draw,hr,table,row_props,cell_props,col_after,col_before,row_after,row_before,merge_cells,split_cells,delete_col,delete_row,delete_table,quran,arabiceditor,code,preview",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:!0,theme_advanced_resize_horizontal:!1,extended_valid_elements:"iframe[style|src|title|width|height|allowfullscreen|frameborder]",content_css:"../lib.assets/theme/default/css/content-test-editor.css",file_browser_callback:"fileBrowserCallBack",apply_source_formatting:!0,accessibility_warnings:!1,template_replace_values:{username:"Kamshory",staffid:"612126"}}),setTimeout(function(){$("textarea.htmleditor").each(function(e,t){let a=$(this).attr("id"),i=document.getElementById(a+"_ifr");i.contentDocument||i.contentWindow.document})},2e3),$(document).on("change","#numbering",function(){let e=$(this).val();$(".option-item").each(function(t,a){let i=parseInt($(this).attr("data-index")),n=numbering[e][i];$(this).find(".option-label").text(n)})})});