function createLineObject(lineNumber,lineContent){let nPipe=lineContent.split("|").length-1,x=lineContent.replace(/[^-\|]/gi,""),x2=lineContent.replace(/\s/g,""),hasPipeAndDash=x==x2&&x2.length>1;return{lineNumber:parseInt(lineNumber),content:lineContent,pipe:nPipe,pipeDash:hasPipeAndDash,startTable:!1,inTable:!1,endTable:!1}}function detectTable(html){let html2=html;html=html.split("\r\n").join("\n"),html2=html2.split("\r\n").join("\n");let arr=html.split("\n"),arr2=html2.split("\n"),lineObj=[];for(let i in arr)arr2[i]=arr[i].trim(),lineObj.push(createLineObject(i,arr2[i]));let inTable=!1,tableObj=[];for(let i=1,j=0;i<lineObj.length;i++)lineObj[i].pipeDash&&lineObj[i-1].pipe>0&&(inTable=!0,lineObj[i].inTable=!0,lineObj[i-1].startTable=!0,tableObj[j]=[],tableObj[j].push(lineObj[i-1]),tableObj[j].push(lineObj[i])),inTable&&!lineObj[i].pipeDash&&lineObj[i].pipe>0&&(lineObj[i].inTable=!0,i==lineObj.length-1&&(lineObj[i].endTable=!0),tableObj[j].push(lineObj[i])),inTable&&0==lineObj[i].pipe&&(inTable=!1,lineObj[i-1].endTable=!0,j++);for(let i in arr)arr[i]=arr[i]+"<br />";for(let i in tableObj){let tab=tableObj[i];for(let i in tab){let content="";tab[i].startTable?content=createTableHeader(tab[i].content):tab[i].inTable&&(tab[i].pipeDash||(content=tab[i].endTable?createTableContent(tab[i].content)+"</tbody></table>":createTableContent(tab[i].content))),arr[tab[i].lineNumber]=content}}return arr.join("\r\n")}function createTableHeader(input){let arr=(input=input.trim()).split("|"),content='<table class="table table-bordered"><thead><tr>';for(let i=0;i<arr.length;i++)(0==i&&""!=arr[i]||i==arr.length-1&&""!=arr[i]||""!=arr[i])&&(content+="<td>"+arr[i]+"</td>");return content+="</tr></thead><tbody>",content}function createTableContent(input){let arr=(input=input.trim()).split("|"),content="<tr>";for(let i=0;i<arr.length;i++)(0==i&&""!=arr[i]||i==arr.length-1&&""!=arr[i]||""!=arr[i])&&(content+="<td>"+arr[i]+"</td>");return content+="</tr>",content}